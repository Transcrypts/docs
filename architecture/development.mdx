---
title: "Development Setup"
description: "Local development environment, build system, and deployment"
---

## Prerequisites

<Info>
  Before setting up the development environment, ensure the following tools are installed:
  - **Node.js** >= 18
  - **pnpm** >= 8 (install with `npm install -g pnpm`)
  - **Git** for version control
</Info>

## Getting Started

<Steps>
  <Step title="Install dependencies">
    From the repository root, install all workspace packages:

    ```bash
    pnpm install
    ```
  </Step>

  <Step title="Build the SDK">
    Build the SDK package to generate the distributable output:

    ```bash
    pnpm --filter transcrypts build
    ```
  </Step>

  <Step title="Run the development server">
    Start both the widget dev server and the playground in parallel:

    ```bash
    pnpm dev
    ```

    This runs the widget on `http://localhost:3001` and serves the playground for testing the SDK integration.
  </Step>
</Steps>

## Development Commands

| Command | Description |
|---------|-------------|
| `pnpm install` | Install all workspace dependencies |
| `pnpm dev` | Start widget dev server and playground concurrently |
| `pnpm --filter transcrypts build` | Build the SDK (ESM, CJS, IIFE, DTS) |
| `pnpm --filter @transcrypts/widget dev` | Start the widget dev server only |
| `pnpm --filter @transcrypts/widget build` | Build the widget for production |

## Build & Distribution

### SDK Build Pipeline

The SDK is built using **tsup** (powered by esbuild) with the following output formats:

| Format | File | Use Case |
|--------|------|----------|
| ESM | `dist/index.mjs` | Modern bundlers (Vite, Webpack 5, Rollup) |
| CJS | `dist/index.cjs` | Node.js and legacy bundlers |
| IIFE | `dist/index.global.js` | Direct `<script>` tag inclusion |
| DTS | `dist/index.d.ts` | TypeScript type definitions |

The `tsup.config.ts` configuration:

```typescript
import { defineConfig } from 'tsup';

export default defineConfig({
  entry: ['src/index.ts'],
  format: ['esm', 'cjs', 'iife'],
  dts: true,
  splitting: false,
  sourcemap: true,
  clean: true,
  globalName: 'TranscryptsSDK',
});
```

### Widget Build Pipeline

The widget is built using **Vite** for production:

```bash
pnpm --filter @transcrypts/widget build
```

Vite produces an optimized static bundle in the `dist/` directory, ready for deployment to any static hosting service.

## Deployment Guide

### Widget Deployment (Netlify)

The widget is designed to be deployed as a static site on Netlify or any similar hosting platform:

1. Connect the repository to Netlify
2. Set the build command: `pnpm --filter @transcrypts/widget build`
3. Set the publish directory: `packages/widget/dist`
4. Deploy -- the widget will be available at the configured domain (e.g., `widget.transcrypts.com`)

### SDK npm Publication

The SDK is published to npm as the `transcrypts` package:

```bash
cd packages/sdk
pnpm build
npm publish
```

The `package.json` exports map ensures correct resolution for all module systems:

```json
{
  "main": "./dist/index.cjs",
  "module": "./dist/index.mjs",
  "types": "./dist/index.d.ts",
  "exports": {
    ".": {
      "import": "./dist/index.mjs",
      "require": "./dist/index.cjs",
      "types": "./dist/index.d.ts"
    }
  }
}
```

## Technology Stack

### SDK (`transcrypts`)

| Technology | Version | Purpose |
|------------|---------|---------|
| TypeScript | ^5.7 | Type-safe source language |
| tsup | ^8.3 | Bundler (ESM, CJS, IIFE, DTS generation) |
| esbuild | (tsup dep) | Underlying fast bundler |

### Widget (`@transcrypts/widget`)

| Technology | Version | Purpose |
|------------|---------|---------|
| React | ^19.0 | UI component framework |
| React DOM | ^19.0 | DOM rendering |
| TypeScript | ^5.7 | Type-safe source language |
| Vite | ^6.0 | Dev server and production bundler |
| Tailwind CSS | ^4.1 | Utility-first CSS framework |
| @tailwindcss/vite | ^4.1 | Vite plugin for Tailwind |
| clsx | ^2.1 | Conditional class name joining |
| tailwind-merge | ^3.4 | Tailwind class conflict resolution |
| class-variance-authority | ^0.7 | Component variant management |
| lucide-react | ^0.562 | Icon library |

### Monorepo Tooling

| Technology | Version | Purpose |
|------------|---------|---------|
| pnpm | >= 8 | Package manager with workspace support |
| pnpm workspaces | -- | Monorepo package linking |
| concurrently | ^9.1 | Parallel script execution in development |
| serve | ^14.2 | Static file server for playground |

### Browser APIs Used

| API | Used By | Purpose |
|-----|---------|---------|
| `window.postMessage` | SDK + Widget | Cross-origin communication |
| `MessageEvent` | SDK | Receiving and validating widget messages |
| `document.createElement` | SDK | Dynamic iframe and overlay creation |
| `btoa` / `atob` | SDK + Widget | Token encoding/decoding (demo) |
| `URL` | SDK | Origin parsing for validation |
| `requestAnimationFrame` | SDK | Smooth entrance/exit animations |
